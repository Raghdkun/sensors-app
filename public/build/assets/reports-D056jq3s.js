import{r as d,j as t,a as Ze,c as L,u as Dt,H as Ot}from"./app-pkigXPgA.js";import{C as J,d as Q,R as Je,B as pe,a as $e,b as ze,c as Le}from"./badge-BO4UtMQR.js";import{a as F,b as $t,u as H,c as ce,B as ee}from"./app-logo-icon-B5cJjaRc.js";import{u as Ue,c as R,a as te}from"./index-B_wyd2HL.js";import{u as zt,R as Lt,c as Fe,d as Ft,P as Vt,e as Qe,f as Bt,V as Ht,g as Ut,h as Wt,i as Kt,j as qt,F as Xt,D as Gt,C as Yt,k as Zt,A as Jt}from"./app-layout-CNkL_DMD.js";import{u as Qt}from"./index-Qvv4KLe3.js";import{C as et,a as es}from"./chevron-up-9P47DPwV.js";import{C as ts}from"./check-D9Le_FEh.js";import{T as Se,S as ke}from"./skeleton-Bzr2k9W0.js";import{S as G}from"./spinner-CTIKhrD6.js";import{C as ss,D as tt,W as st}from"./wifi-off-DE1f9tCp.js";/* empty css            */import"./index-CBa_LQiU.js";import"./index-H92Pz0xW.js";import"./loader-circle-B1UB83vA.js";const ns=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],rs=F("ArrowDown",ns);const os=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],as=F("ArrowUp",os);const ls=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],is=F("Calendar",ls);const cs=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ye=F("ChartColumn",cs);const ds=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],We=F("CircleCheck",ds);const us=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Ke=F("Download",us);const ms=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],ps=F("Layers",ms);const fs=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],xs=F("Pause",fs);const hs=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],gs=F("Play",hs);const vs=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],ys=F("Settings2",vs);const Ss=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],fe=F("TriangleAlert",Ss);const js=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ns=F("Zap",js);function qe(n,[e,s]){return Math.min(s,Math.max(e,n))}function bs(n,e=[]){let s=[];function r(c,o){const l=d.createContext(o),i=s.length;s=[...s,o];const u=m=>{const{scope:S,children:y,...N}=m,p=S?.[n]?.[i]||l,g=d.useMemo(()=>N,Object.values(N));return t.jsx(p.Provider,{value:g,children:y})};u.displayName=c+"Provider";function x(m,S){const y=S?.[n]?.[i]||l,N=d.useContext(y);if(N)return N;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${c}\``)}return[u,x]}const a=()=>{const c=s.map(o=>d.createContext(o));return function(l){const i=l?.[n]||c;return d.useMemo(()=>({[`__scope${n}`]:{...l,[n]:i}}),[l,i])}};return a.scopeName=n,[r,ws(a,...e)]}function ws(...n){const e=n[0];if(n.length===1)return e;const s=()=>{const r=n.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(c){const o=r.reduce((l,{useScope:i,scopeName:u})=>{const m=i(c)[`__scope${u}`];return{...l,...m}},{});return d.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return s.scopeName=e.scopeName,s}function nt(n){const e=_s(n),s=d.forwardRef((r,a)=>{const{children:c,...o}=r,l=d.Children.toArray(c),i=l.find(Ts);if(i){const u=i.props.children,x=l.map(m=>m===i?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:m);return t.jsx(e,{...o,ref:a,children:d.isValidElement(u)?d.cloneElement(u,void 0,x):null})}return t.jsx(e,{...o,ref:a,children:c})});return s.displayName=`${n}.Slot`,s}function _s(n){const e=d.forwardRef((s,r)=>{const{children:a,...c}=s;if(d.isValidElement(a)){const o=Es(a),l=Is(c,a.props);return a.type!==d.Fragment&&(l.ref=r?$t(r,o):o),d.cloneElement(a,l)}return d.Children.count(a)>1?d.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var Cs=Symbol("radix.slottable");function Ts(n){return d.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Cs}function Is(n,e){const s={...e};for(const r in e){const a=n[r],c=e[r];/^on[A-Z]/.test(r)?a&&c?s[r]=(...l)=>{const i=c(...l);return a(...l),i}:a&&(s[r]=a):r==="style"?s[r]={...a,...c}:r==="className"&&(s[r]=[a,c].filter(Boolean).join(" "))}return{...n,...s}}function Es(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?n.props.ref:n.props.ref||n.ref)}var Rs=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],$=Rs.reduce((n,e)=>{const s=nt(`Primitive.${e}`),r=d.forwardRef((a,c)=>{const{asChild:o,...l}=a,i=o?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(i,{...l,ref:c})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{}),ks=[" ","Enter","ArrowUp","ArrowDown"],Ps=[" ","Enter"],ae="Select",[Ne,be,Ms]=Bt(ae),[de]=bs(ae,[Ms,Qe]),we=Qe(),[As,se]=de(ae),[Ds,Os]=de(ae),rt=n=>{const{__scopeSelect:e,children:s,open:r,defaultOpen:a,onOpenChange:c,value:o,defaultValue:l,onValueChange:i,dir:u,name:x,autoComplete:m,disabled:S,required:y,form:N}=n,p=we(e),[g,w]=d.useState(null),[h,b]=d.useState(null),[k,P]=d.useState(!1),U=zt(u),[f,v]=Ue({prop:r,defaultProp:a??!1,onChange:c,caller:ae}),[T,A]=Ue({prop:o,defaultProp:l,onChange:i,caller:ae}),z=d.useRef(null),W=g?N||!!g.closest("form"):!0,[Y,K]=d.useState(new Set),q=Array.from(Y).map(D=>D.props.value).join(";");return t.jsx(Lt,{...p,children:t.jsxs(As,{required:y,scope:e,trigger:g,onTriggerChange:w,valueNode:h,onValueNodeChange:b,valueNodeHasChildren:k,onValueNodeHasChildrenChange:P,contentId:Fe(),value:T,onValueChange:A,open:f,onOpenChange:v,dir:U,triggerPointerDownPosRef:z,disabled:S,children:[t.jsx(Ne.Provider,{scope:e,children:t.jsx(Ds,{scope:n.__scopeSelect,onNativeOptionAdd:d.useCallback(D=>{K(B=>new Set(B).add(D))},[]),onNativeOptionRemove:d.useCallback(D=>{K(B=>{const X=new Set(B);return X.delete(D),X})},[]),children:s})}),W?t.jsxs(Ct,{"aria-hidden":!0,required:y,tabIndex:-1,name:x,autoComplete:m,value:T,onChange:D=>A(D.target.value),disabled:S,form:N,children:[T===void 0?t.jsx("option",{value:""}):null,Array.from(Y)]},q):null]})})};rt.displayName=ae;var ot="SelectTrigger",at=d.forwardRef((n,e)=>{const{__scopeSelect:s,disabled:r=!1,...a}=n,c=we(s),o=se(ot,s),l=o.disabled||r,i=H(e,o.onTriggerChange),u=be(s),x=d.useRef("touch"),[m,S,y]=It(p=>{const g=u().filter(b=>!b.disabled),w=g.find(b=>b.value===o.value),h=Et(g,p,w);h!==void 0&&o.onValueChange(h.value)}),N=p=>{l||(o.onOpenChange(!0),y()),p&&(o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return t.jsx(Ft,{asChild:!0,...c,children:t.jsx($.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Tt(o.value)?"":void 0,...a,ref:i,onClick:R(a.onClick,p=>{p.currentTarget.focus(),x.current!=="mouse"&&N(p)}),onPointerDown:R(a.onPointerDown,p=>{x.current=p.pointerType;const g=p.target;g.hasPointerCapture(p.pointerId)&&g.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(N(p),p.preventDefault())}),onKeyDown:R(a.onKeyDown,p=>{const g=m.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&S(p.key),!(g&&p.key===" ")&&ks.includes(p.key)&&(N(),p.preventDefault())})})})});at.displayName=ot;var lt="SelectValue",it=d.forwardRef((n,e)=>{const{__scopeSelect:s,className:r,style:a,children:c,placeholder:o="",...l}=n,i=se(lt,s),{onValueNodeHasChildrenChange:u}=i,x=c!==void 0,m=H(e,i.onValueNodeChange);return te(()=>{u(x)},[u,x]),t.jsx($.span,{...l,ref:m,style:{pointerEvents:"none"},children:Tt(i.value)?t.jsx(t.Fragment,{children:o}):c})});it.displayName=lt;var $s="SelectIcon",ct=d.forwardRef((n,e)=>{const{__scopeSelect:s,children:r,...a}=n;return t.jsx($.span,{"aria-hidden":!0,...a,ref:e,children:r||"▼"})});ct.displayName=$s;var zs="SelectPortal",dt=n=>t.jsx(Vt,{asChild:!0,...n});dt.displayName=zs;var le="SelectContent",ut=d.forwardRef((n,e)=>{const s=se(le,n.__scopeSelect),[r,a]=d.useState();if(te(()=>{a(new DocumentFragment)},[]),!s.open){const c=r;return c?Ze.createPortal(t.jsx(mt,{scope:n.__scopeSelect,children:t.jsx(Ne.Slot,{scope:n.__scopeSelect,children:t.jsx("div",{children:n.children})})}),c):null}return t.jsx(pt,{...n,ref:e})});ut.displayName=le;var V=10,[mt,ne]=de(le),Ls="SelectContentImpl",Fs=nt("SelectContent.RemoveScroll"),pt=d.forwardRef((n,e)=>{const{__scopeSelect:s,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:c,onPointerDownOutside:o,side:l,sideOffset:i,align:u,alignOffset:x,arrowPadding:m,collisionBoundary:S,collisionPadding:y,sticky:N,hideWhenDetached:p,avoidCollisions:g,...w}=n,h=se(le,s),[b,k]=d.useState(null),[P,U]=d.useState(null),f=H(e,j=>k(j)),[v,T]=d.useState(null),[A,z]=d.useState(null),W=be(s),[Y,K]=d.useState(!1),q=d.useRef(!1);d.useEffect(()=>{if(b)return Wt(b)},[b]),Kt();const D=d.useCallback(j=>{const[I,...O]=W().map(E=>E.ref.current),[_]=O.slice(-1),C=document.activeElement;for(const E of j)if(E===C||(E?.scrollIntoView({block:"nearest"}),E===I&&P&&(P.scrollTop=0),E===_&&P&&(P.scrollTop=P.scrollHeight),E?.focus(),document.activeElement!==C))return},[W,P]),B=d.useCallback(()=>D([v,b]),[D,v,b]);d.useEffect(()=>{Y&&B()},[Y,B]);const{onOpenChange:X,triggerPointerDownPosRef:Z}=h;d.useEffect(()=>{if(b){let j={x:0,y:0};const I=_=>{j={x:Math.abs(Math.round(_.pageX)-(Z.current?.x??0)),y:Math.abs(Math.round(_.pageY)-(Z.current?.y??0))}},O=_=>{j.x<=10&&j.y<=10?_.preventDefault():b.contains(_.target)||X(!1),document.removeEventListener("pointermove",I),Z.current=null};return Z.current!==null&&(document.addEventListener("pointermove",I),document.addEventListener("pointerup",O,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",I),document.removeEventListener("pointerup",O,{capture:!0})}}},[b,X,Z]),d.useEffect(()=>{const j=()=>X(!1);return window.addEventListener("blur",j),window.addEventListener("resize",j),()=>{window.removeEventListener("blur",j),window.removeEventListener("resize",j)}},[X]);const[_e,xe]=It(j=>{const I=W().filter(C=>!C.disabled),O=I.find(C=>C.ref.current===document.activeElement),_=Et(I,j,O);_&&setTimeout(()=>_.ref.current.focus())}),Ce=d.useCallback((j,I,O)=>{const _=!q.current&&!O;(h.value!==void 0&&h.value===I||_)&&(T(j),_&&(q.current=!0))},[h.value]),Te=d.useCallback(()=>b?.focus(),[b]),ie=d.useCallback((j,I,O)=>{const _=!q.current&&!O;(h.value!==void 0&&h.value===I||_)&&z(j)},[h.value]),he=r==="popper"?Pe:ft,ue=he===Pe?{side:l,sideOffset:i,align:u,alignOffset:x,arrowPadding:m,collisionBoundary:S,collisionPadding:y,sticky:N,hideWhenDetached:p,avoidCollisions:g}:{};return t.jsx(mt,{scope:s,content:b,viewport:P,onViewportChange:U,itemRefCallback:Ce,selectedItem:v,onItemLeave:Te,itemTextRefCallback:ie,focusSelectedItem:B,selectedItemText:A,position:r,isPositioned:Y,searchRef:_e,children:t.jsx(qt,{as:Fs,allowPinchZoom:!0,children:t.jsx(Xt,{asChild:!0,trapped:h.open,onMountAutoFocus:j=>{j.preventDefault()},onUnmountAutoFocus:R(a,j=>{h.trigger?.focus({preventScroll:!0}),j.preventDefault()}),children:t.jsx(Gt,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:c,onPointerDownOutside:o,onFocusOutside:j=>j.preventDefault(),onDismiss:()=>h.onOpenChange(!1),children:t.jsx(he,{role:"listbox",id:h.contentId,"data-state":h.open?"open":"closed",dir:h.dir,onContextMenu:j=>j.preventDefault(),...w,...ue,onPlaced:()=>K(!0),ref:f,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:R(w.onKeyDown,j=>{const I=j.ctrlKey||j.altKey||j.metaKey;if(j.key==="Tab"&&j.preventDefault(),!I&&j.key.length===1&&xe(j.key),["ArrowUp","ArrowDown","Home","End"].includes(j.key)){let _=W().filter(C=>!C.disabled).map(C=>C.ref.current);if(["ArrowUp","End"].includes(j.key)&&(_=_.slice().reverse()),["ArrowUp","ArrowDown"].includes(j.key)){const C=j.target,E=_.indexOf(C);_=_.slice(E+1)}setTimeout(()=>D(_)),j.preventDefault()}})})})})})})});pt.displayName=Ls;var Vs="SelectItemAlignedPosition",ft=d.forwardRef((n,e)=>{const{__scopeSelect:s,onPlaced:r,...a}=n,c=se(le,s),o=ne(le,s),[l,i]=d.useState(null),[u,x]=d.useState(null),m=H(e,f=>x(f)),S=be(s),y=d.useRef(!1),N=d.useRef(!0),{viewport:p,selectedItem:g,selectedItemText:w,focusSelectedItem:h}=o,b=d.useCallback(()=>{if(c.trigger&&c.valueNode&&l&&u&&p&&g&&w){const f=c.trigger.getBoundingClientRect(),v=u.getBoundingClientRect(),T=c.valueNode.getBoundingClientRect(),A=w.getBoundingClientRect();if(c.dir!=="rtl"){const C=A.left-v.left,E=T.left-C,re=f.left-E,oe=f.width+re,Ie=Math.max(oe,v.width),Ee=window.innerWidth-V,Re=qe(E,[V,Math.max(V,Ee-Ie)]);l.style.minWidth=oe+"px",l.style.left=Re+"px"}else{const C=v.right-A.right,E=window.innerWidth-T.right-C,re=window.innerWidth-f.right-E,oe=f.width+re,Ie=Math.max(oe,v.width),Ee=window.innerWidth-V,Re=qe(E,[V,Math.max(V,Ee-Ie)]);l.style.minWidth=oe+"px",l.style.right=Re+"px"}const z=S(),W=window.innerHeight-V*2,Y=p.scrollHeight,K=window.getComputedStyle(u),q=parseInt(K.borderTopWidth,10),D=parseInt(K.paddingTop,10),B=parseInt(K.borderBottomWidth,10),X=parseInt(K.paddingBottom,10),Z=q+D+Y+X+B,_e=Math.min(g.offsetHeight*5,Z),xe=window.getComputedStyle(p),Ce=parseInt(xe.paddingTop,10),Te=parseInt(xe.paddingBottom,10),ie=f.top+f.height/2-V,he=W-ie,ue=g.offsetHeight/2,j=g.offsetTop+ue,I=q+D+j,O=Z-I;if(I<=ie){const C=z.length>0&&g===z[z.length-1].ref.current;l.style.bottom="0px";const E=u.clientHeight-p.offsetTop-p.offsetHeight,re=Math.max(he,ue+(C?Te:0)+E+B),oe=I+re;l.style.height=oe+"px"}else{const C=z.length>0&&g===z[0].ref.current;l.style.top="0px";const re=Math.max(ie,q+p.offsetTop+(C?Ce:0)+ue)+O;l.style.height=re+"px",p.scrollTop=I-ie+p.offsetTop}l.style.margin=`${V}px 0`,l.style.minHeight=_e+"px",l.style.maxHeight=W+"px",r?.(),requestAnimationFrame(()=>y.current=!0)}},[S,c.trigger,c.valueNode,l,u,p,g,w,c.dir,r]);te(()=>b(),[b]);const[k,P]=d.useState();te(()=>{u&&P(window.getComputedStyle(u).zIndex)},[u]);const U=d.useCallback(f=>{f&&N.current===!0&&(b(),h?.(),N.current=!1)},[b,h]);return t.jsx(Hs,{scope:s,contentWrapper:l,shouldExpandOnScrollRef:y,onScrollButtonChange:U,children:t.jsx("div",{ref:i,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:t.jsx($.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});ft.displayName=Vs;var Bs="SelectPopperPosition",Pe=d.forwardRef((n,e)=>{const{__scopeSelect:s,align:r="start",collisionPadding:a=V,...c}=n,o=we(s);return t.jsx(Yt,{...o,...c,ref:e,align:r,collisionPadding:a,style:{boxSizing:"border-box",...c.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Pe.displayName=Bs;var[Hs,Ve]=de(le,{}),Me="SelectViewport",xt=d.forwardRef((n,e)=>{const{__scopeSelect:s,nonce:r,...a}=n,c=ne(Me,s),o=Ve(Me,s),l=H(e,c.onViewportChange),i=d.useRef(0);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),t.jsx(Ne.Slot,{scope:s,children:t.jsx($.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:R(a.onScroll,u=>{const x=u.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:S}=o;if(S?.current&&m){const y=Math.abs(i.current-x.scrollTop);if(y>0){const N=window.innerHeight-V*2,p=parseFloat(m.style.minHeight),g=parseFloat(m.style.height),w=Math.max(p,g);if(w<N){const h=w+y,b=Math.min(N,h),k=h-b;m.style.height=b+"px",m.style.bottom==="0px"&&(x.scrollTop=k>0?k:0,m.style.justifyContent="flex-end")}}}i.current=x.scrollTop})})})]})});xt.displayName=Me;var ht="SelectGroup",[Us,Ws]=de(ht),Ks=d.forwardRef((n,e)=>{const{__scopeSelect:s,...r}=n,a=Fe();return t.jsx(Us,{scope:s,id:a,children:t.jsx($.div,{role:"group","aria-labelledby":a,...r,ref:e})})});Ks.displayName=ht;var gt="SelectLabel",qs=d.forwardRef((n,e)=>{const{__scopeSelect:s,...r}=n,a=Ws(gt,s);return t.jsx($.div,{id:a.id,...r,ref:e})});qs.displayName=gt;var je="SelectItem",[Xs,vt]=de(je),yt=d.forwardRef((n,e)=>{const{__scopeSelect:s,value:r,disabled:a=!1,textValue:c,...o}=n,l=se(je,s),i=ne(je,s),u=l.value===r,[x,m]=d.useState(c??""),[S,y]=d.useState(!1),N=H(e,h=>i.itemRefCallback?.(h,r,a)),p=Fe(),g=d.useRef("touch"),w=()=>{a||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return t.jsx(Xs,{scope:s,value:r,disabled:a,textId:p,isSelected:u,onItemTextChange:d.useCallback(h=>{m(b=>b||(h?.textContent??"").trim())},[]),children:t.jsx(Ne.ItemSlot,{scope:s,value:r,disabled:a,textValue:x,children:t.jsx($.div,{role:"option","aria-labelledby":p,"data-highlighted":S?"":void 0,"aria-selected":u&&S,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:N,onFocus:R(o.onFocus,()=>y(!0)),onBlur:R(o.onBlur,()=>y(!1)),onClick:R(o.onClick,()=>{g.current!=="mouse"&&w()}),onPointerUp:R(o.onPointerUp,()=>{g.current==="mouse"&&w()}),onPointerDown:R(o.onPointerDown,h=>{g.current=h.pointerType}),onPointerMove:R(o.onPointerMove,h=>{g.current=h.pointerType,a?i.onItemLeave?.():g.current==="mouse"&&h.currentTarget.focus({preventScroll:!0})}),onPointerLeave:R(o.onPointerLeave,h=>{h.currentTarget===document.activeElement&&i.onItemLeave?.()}),onKeyDown:R(o.onKeyDown,h=>{i.searchRef?.current!==""&&h.key===" "||(Ps.includes(h.key)&&w(),h.key===" "&&h.preventDefault())})})})})});yt.displayName=je;var me="SelectItemText",St=d.forwardRef((n,e)=>{const{__scopeSelect:s,className:r,style:a,...c}=n,o=se(me,s),l=ne(me,s),i=vt(me,s),u=Os(me,s),[x,m]=d.useState(null),S=H(e,w=>m(w),i.onItemTextChange,w=>l.itemTextRefCallback?.(w,i.value,i.disabled)),y=x?.textContent,N=d.useMemo(()=>t.jsx("option",{value:i.value,disabled:i.disabled,children:y},i.value),[i.disabled,i.value,y]),{onNativeOptionAdd:p,onNativeOptionRemove:g}=u;return te(()=>(p(N),()=>g(N)),[p,g,N]),t.jsxs(t.Fragment,{children:[t.jsx($.span,{id:i.textId,...c,ref:S}),i.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ze.createPortal(c.children,o.valueNode):null]})});St.displayName=me;var jt="SelectItemIndicator",Nt=d.forwardRef((n,e)=>{const{__scopeSelect:s,...r}=n;return vt(jt,s).isSelected?t.jsx($.span,{"aria-hidden":!0,...r,ref:e}):null});Nt.displayName=jt;var Ae="SelectScrollUpButton",bt=d.forwardRef((n,e)=>{const s=ne(Ae,n.__scopeSelect),r=Ve(Ae,n.__scopeSelect),[a,c]=d.useState(!1),o=H(e,r.onScrollButtonChange);return te(()=>{if(s.viewport&&s.isPositioned){let l=function(){const u=i.scrollTop>0;c(u)};const i=s.viewport;return l(),i.addEventListener("scroll",l),()=>i.removeEventListener("scroll",l)}},[s.viewport,s.isPositioned]),a?t.jsx(_t,{...n,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:i}=s;l&&i&&(l.scrollTop=l.scrollTop-i.offsetHeight)}}):null});bt.displayName=Ae;var De="SelectScrollDownButton",wt=d.forwardRef((n,e)=>{const s=ne(De,n.__scopeSelect),r=Ve(De,n.__scopeSelect),[a,c]=d.useState(!1),o=H(e,r.onScrollButtonChange);return te(()=>{if(s.viewport&&s.isPositioned){let l=function(){const u=i.scrollHeight-i.clientHeight,x=Math.ceil(i.scrollTop)<u;c(x)};const i=s.viewport;return l(),i.addEventListener("scroll",l),()=>i.removeEventListener("scroll",l)}},[s.viewport,s.isPositioned]),a?t.jsx(_t,{...n,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:i}=s;l&&i&&(l.scrollTop=l.scrollTop+i.offsetHeight)}}):null});wt.displayName=De;var _t=d.forwardRef((n,e)=>{const{__scopeSelect:s,onAutoScroll:r,...a}=n,c=ne("SelectScrollButton",s),o=d.useRef(null),l=be(s),i=d.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return d.useEffect(()=>()=>i(),[i]),te(()=>{l().find(x=>x.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),t.jsx($.div,{"aria-hidden":!0,...a,ref:e,style:{flexShrink:0,...a.style},onPointerDown:R(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:R(a.onPointerMove,()=>{c.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:R(a.onPointerLeave,()=>{i()})})}),Gs="SelectSeparator",Ys=d.forwardRef((n,e)=>{const{__scopeSelect:s,...r}=n;return t.jsx($.div,{"aria-hidden":!0,...r,ref:e})});Ys.displayName=Gs;var Oe="SelectArrow",Zs=d.forwardRef((n,e)=>{const{__scopeSelect:s,...r}=n,a=we(s),c=se(Oe,s),o=ne(Oe,s);return c.open&&o.position==="popper"?t.jsx(Zt,{...a,...r,ref:e}):null});Zs.displayName=Oe;var Js="SelectBubbleInput",Ct=d.forwardRef(({__scopeSelect:n,value:e,...s},r)=>{const a=d.useRef(null),c=H(r,a),o=Qt(e);return d.useEffect(()=>{const l=a.current;if(!l)return;const i=window.HTMLSelectElement.prototype,x=Object.getOwnPropertyDescriptor(i,"value").set;if(o!==e&&x){const m=new Event("change",{bubbles:!0});x.call(l,e),l.dispatchEvent(m)}},[o,e]),t.jsx($.select,{...s,style:{...Ht,...s.style},ref:c,defaultValue:e})});Ct.displayName=Js;function Tt(n){return n===""||n===void 0}function It(n){const e=Ut(n),s=d.useRef(""),r=d.useRef(0),a=d.useCallback(o=>{const l=s.current+o;e(l),(function i(u){s.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>i(""),1e3))})(l)},[e]),c=d.useCallback(()=>{s.current="",window.clearTimeout(r.current)},[]);return d.useEffect(()=>()=>window.clearTimeout(r.current),[]),[s,a,c]}function Et(n,e,s){const a=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,c=s?n.indexOf(s):-1;let o=Qs(n,Math.max(c,0));a.length===1&&(o=o.filter(u=>u!==s));const i=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return i!==s?i:void 0}function Qs(n,e){return n.map((s,r)=>n[(e+r)%n.length])}var en=rt,tn=at,sn=it,nn=ct,rn=dt,on=ut,an=xt,ln=yt,cn=St,dn=Nt,un=bt,mn=wt;function Rt(n){const e=L.c(4);let s;e[0]!==n?({...s}=n,e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=t.jsx(en,{"data-slot":"select",...s}),e[2]=s,e[3]=r):r=e[3],r}function kt(n){const e=L.c(4);let s;e[0]!==n?({...s}=n,e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=t.jsx(sn,{"data-slot":"select-value",...s}),e[2]=s,e[3]=r):r=e[3],r}function Pt(n){const e=L.c(11);let s,r,a;e[0]!==n?({className:r,children:s,...a}=n,e[0]=n,e[1]=s,e[2]=r,e[3]=a):(s=e[1],r=e[2],a=e[3]);let c;e[4]!==r?(c=ce("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-full items-center justify-between rounded-md border bg-transparent px-3 py-2 text-sm shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 [&>span]:line-clamp-1",r),e[4]=r,e[5]=c):c=e[5];let o;e[6]===Symbol.for("react.memo_cache_sentinel")?(o=t.jsx(nn,{asChild:!0,children:t.jsx(et,{className:"size-4 opacity-50"})}),e[6]=o):o=e[6];let l;return e[7]!==s||e[8]!==a||e[9]!==c?(l=t.jsxs(tn,{"data-slot":"select-trigger",className:c,...a,children:[s,o]}),e[7]=s,e[8]=a,e[9]=c,e[10]=l):l=e[10],l}function Mt(n){const e=L.c(20);let s,r,a,c;e[0]!==n?({className:r,children:s,position:c,...a}=n,e[0]=n,e[1]=s,e[2]=r,e[3]=a,e[4]=c):(s=e[1],r=e[2],a=e[3],c=e[4]);const o=c===void 0?"popper":c,l=o==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1";let i;e[5]!==r||e[6]!==l?(i=ce("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md",l,r),e[5]=r,e[6]=l,e[7]=i):i=e[7];let u;e[8]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx(pn,{}),e[8]=u):u=e[8];const x=o==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1";let m;e[9]!==x?(m=ce("p-1",x),e[9]=x,e[10]=m):m=e[10];let S;e[11]!==s||e[12]!==m?(S=t.jsx(an,{className:m,children:s}),e[11]=s,e[12]=m,e[13]=S):S=e[13];let y;e[14]===Symbol.for("react.memo_cache_sentinel")?(y=t.jsx(fn,{}),e[14]=y):y=e[14];let N;return e[15]!==o||e[16]!==a||e[17]!==i||e[18]!==S?(N=t.jsx(rn,{children:t.jsxs(on,{"data-slot":"select-content",className:i,position:o,...a,children:[u,S,y]})}),e[15]=o,e[16]=a,e[17]=i,e[18]=S,e[19]=N):N=e[19],N}function At(n){const e=L.c(13);let s,r,a;e[0]!==n?({className:r,children:s,...a}=n,e[0]=n,e[1]=s,e[2]=r,e[3]=a):(s=e[1],r=e[2],a=e[3]);let c;e[4]!==r?(c=ce("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",r),e[4]=r,e[5]=c):c=e[5];let o;e[6]===Symbol.for("react.memo_cache_sentinel")?(o=t.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:t.jsx(dn,{children:t.jsx(ts,{className:"size-4"})})}),e[6]=o):o=e[6];let l;e[7]!==s?(l=t.jsx(cn,{children:s}),e[7]=s,e[8]=l):l=e[8];let i;return e[9]!==a||e[10]!==c||e[11]!==l?(i=t.jsxs(ln,{"data-slot":"select-item",className:c,...a,children:[o,l]}),e[9]=a,e[10]=c,e[11]=l,e[12]=i):i=e[12],i}function pn(n){const e=L.c(9);let s,r;e[0]!==n?({className:s,...r}=n,e[0]=n,e[1]=s,e[2]=r):(s=e[1],r=e[2]);let a;e[3]!==s?(a=ce("flex cursor-default items-center justify-center py-1",s),e[3]=s,e[4]=a):a=e[4];let c;e[5]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx(es,{className:"size-4"}),e[5]=c):c=e[5];let o;return e[6]!==r||e[7]!==a?(o=t.jsx(un,{"data-slot":"select-scroll-up-button",className:a,...r,children:c}),e[6]=r,e[7]=a,e[8]=o):o=e[8],o}function fn(n){const e=L.c(9);let s,r;e[0]!==n?({className:s,...r}=n,e[0]=n,e[1]=s,e[2]=r):(s=e[1],r=e[2]);let a;e[3]!==s?(a=ce("flex cursor-default items-center justify-center py-1",s),e[3]=s,e[4]=a):a=e[4];let c;e[5]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx(et,{className:"size-4"}),e[5]=c):c=e[5];let o;return e[6]!==r||e[7]!==a?(o=t.jsx(mn,{"data-slot":"select-scroll-down-button",className:a,...r,children:c}),e[6]=r,e[7]=a,e[8]=o):o=e[8],o}function M(n,e=1){return n==null?"—":Number(n).toFixed(e)}function Xe(n){return new Date(n).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}function Ge(n){return{daily:"Today",weekly:"This Week",monthly:"This Month"}[n]}function Be(n){return n==null?"text-muted-foreground":n<=32?"text-blue-600 dark:text-blue-400":n<=60?"text-teal-600 dark:text-teal-400":n<=80?"text-amber-600 dark:text-amber-400":"text-red-600 dark:text-red-400"}function He(n){return n==null?"text-muted-foreground":n<=30?"text-amber-600 dark:text-amber-400":n<=60?"text-emerald-600 dark:text-emerald-400":"text-blue-600 dark:text-blue-400"}function ge(n){const e=L.c(16),{label:s,value:r,subtitle:a,icon:c,colorClass:o}=n;let l;e[0]!==s?(l=t.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:s}),e[0]=s,e[1]=l):l=e[1];const i=`text-2xl font-bold ${o??""}`;let u;e[2]!==i||e[3]!==r?(u=t.jsx("p",{className:i,children:r}),e[2]=i,e[3]=r,e[4]=u):u=e[4];let x;e[5]!==a?(x=a&&t.jsx("p",{className:"text-muted-foreground mt-1 text-xs",children:a}),e[5]=a,e[6]=x):x=e[6];let m;e[7]!==l||e[8]!==u||e[9]!==x?(m=t.jsxs("div",{children:[l,u,x]}),e[7]=l,e[8]=u,e[9]=x,e[10]=m):m=e[10];let S;e[11]!==c?(S=t.jsx("div",{className:"bg-muted rounded-lg p-3",children:t.jsx(c,{className:"text-muted-foreground size-5"})}),e[11]=c,e[12]=S):S=e[12];let y;return e[13]!==m||e[14]!==S?(y=t.jsx(J,{children:t.jsx(Q,{className:"pt-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[m,S]})})}),e[13]=m,e[14]=S,e[15]=y):y=e[15],y}function xn(n){const e=L.c(5),{value:s,max:r,colorClass:a}=n,c=r>0?Math.min(s/r*100,100):0,o=`h-2 rounded-full ${a}`,l=`${c}%`;let i;e[0]!==l?(i={width:l},e[0]=l,e[1]=i):i=e[1];let u;return e[2]!==o||e[3]!==i?(u=t.jsx("div",{className:"bg-muted h-2 w-full rounded-full",children:t.jsx("div",{className:o,style:i})}),e[2]=o,e[3]=i,e[4]=u):u=e[4],u}function hn(n){const e=L.c(9),{data:s,unit:r}=n;if(s.length===0){let l;return e[0]===Symbol.for("react.memo_cache_sentinel")?(l=t.jsxs("div",{className:"text-muted-foreground flex flex-col items-center gap-2 py-12 text-sm",children:[t.jsx(ye,{className:"size-8 opacity-40"}),t.jsx("p",{children:"No time-series data available for this period."}),t.jsx("p",{className:"text-xs",children:"Try capturing a snapshot first."})]}),e[0]=l):l=e[0],l}let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsx("thead",{children:t.jsxs("tr",{className:"text-muted-foreground border-b text-left text-xs",children:[t.jsx("th",{className:"px-3 py-2 font-medium",children:"Time"}),t.jsx("th",{className:"px-3 py-2 font-medium",children:"Avg Temp"}),t.jsx("th",{className:"px-3 py-2 font-medium",children:"Min / Max"}),t.jsx("th",{className:"px-3 py-2 font-medium",children:"Avg Humidity"}),t.jsx("th",{className:"px-3 py-2 font-medium",children:"Min / Max"}),t.jsx("th",{className:"px-3 py-2 font-medium text-right",children:"Readings"})]})}),e[1]=a):a=e[1];let c;if(e[2]!==s||e[3]!==r){let l;e[5]!==r?(l=i=>t.jsxs("tr",{className:"hover:bg-muted/50 border-b transition-colors",children:[t.jsx("td",{className:"px-3 py-2 font-mono text-xs",children:i.time_bucket}),t.jsxs("td",{className:`px-3 py-2 font-semibold ${Be(i.avg_temp)}`,children:[M(i.avg_temp),"°",r]}),t.jsxs("td",{className:"text-muted-foreground px-3 py-2 text-xs",children:[t.jsxs("span",{className:"text-blue-500",children:[M(i.min_temp),"°",r]})," / ",t.jsxs("span",{className:"text-red-500",children:[M(i.max_temp),"°",r]})]}),t.jsxs("td",{className:`px-3 py-2 font-semibold ${He(i.avg_humidity)}`,children:[M(i.avg_humidity),"%"]}),t.jsxs("td",{className:"text-muted-foreground px-3 py-2 text-xs",children:[M(i.min_humidity),"% / ",M(i.max_humidity),"%"]}),t.jsx("td",{className:"px-3 py-2 text-right font-mono text-xs",children:i.reading_count})]},i.time_bucket),e[5]=r,e[6]=l):l=e[6],c=s.map(l),e[2]=s,e[3]=r,e[4]=c}else c=e[4];let o;return e[7]!==c?(o=t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[a,t.jsx("tbody",{children:c})]})}),e[7]=c,e[8]=o):o=e[8],o}function gn(n){const e=L.c(12),{devices:s,unit:r}=n;if(s.length===0){let i;return e[0]===Symbol.for("react.memo_cache_sentinel")?(i=t.jsxs("div",{className:"text-muted-foreground flex flex-col items-center gap-2 py-12 text-sm",children:[t.jsx(Se,{className:"size-8 opacity-40"}),t.jsx("p",{children:"No device data available."})]}),e[0]=i):i=e[0],i}let a;e[1]!==s?(a=Math.max(...s.map(vn)),e[1]=s,e[2]=a):a=e[2];const c=a;let o;if(e[3]!==s||e[4]!==c||e[5]!==r){let i;e[7]!==c||e[8]!==r?(i=u=>t.jsxs(J,{className:"gap-3 py-4",children:[t.jsxs($e,{className:"pb-0",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(ze,{className:"text-sm",children:u.device_name}),t.jsxs(pe,{variant:"outline",className:"text-xs font-mono",children:[u.reading_count," readings"]})]}),t.jsx(Le,{className:"font-mono text-xs",children:u.device_id})]}),t.jsxs(Q,{className:"space-y-3",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(Se,{className:"text-muted-foreground size-3.5"}),t.jsx("span",{className:"text-muted-foreground text-xs",children:"Temperature"})]}),t.jsxs("div",{className:"flex items-baseline gap-3",children:[t.jsxs("span",{className:`text-lg font-bold ${Be(u.avg_temp)}`,children:[M(u.avg_temp),"°",r]}),t.jsxs("span",{className:"text-muted-foreground text-xs",children:[t.jsx(rs,{className:"inline size-3 text-blue-500"}),M(u.min_temp),"°",r," ",t.jsx(as,{className:"inline size-3 text-red-500"}),M(u.max_temp),"°",r]})]})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(tt,{className:"text-muted-foreground size-3.5"}),t.jsx("span",{className:"text-muted-foreground text-xs",children:"Humidity"})]}),t.jsxs("div",{className:"flex items-baseline gap-3",children:[t.jsxs("span",{className:`text-lg font-bold ${He(u.avg_humidity)}`,children:[M(u.avg_humidity),"%"]}),t.jsxs("span",{className:"text-muted-foreground text-xs",children:[M(u.min_humidity),"% – ",M(u.max_humidity),"%"]})]})]}),t.jsx(xn,{value:u.reading_count,max:c,colorClass:"bg-primary"}),(u.alarm_count>0||u.offline_count>0)&&t.jsxs("div",{className:"flex gap-3 pt-1",children:[u.alarm_count>0&&t.jsxs(pe,{variant:"destructive",className:"text-xs",children:[t.jsx(fe,{className:"mr-1 size-3"}),u.alarm_count," alarms"]}),u.offline_count>0&&t.jsxs(pe,{variant:"secondary",className:"text-xs",children:[t.jsx(st,{className:"mr-1 size-3"}),u.offline_count," offline"]})]})]})]},u.device_id),e[7]=c,e[8]=r,e[9]=i):i=e[9],o=s.map(i),e[3]=s,e[4]=c,e[5]=r,e[6]=o}else o=e[6];let l;return e[10]!==o?(l=t.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:o}),e[10]=o,e[11]=l):l=e[11],l}function vn(n){return n.reading_count}function yn({stores:n}){const{temperatureUnit:e}=Dt().props,[s,r]=d.useState(n.length>0?n[0].id:null),[a,c]=d.useState("daily"),[o,l]=d.useState(null),[i,u]=d.useState(!1),[x,m]=d.useState(!1),[S,y]=d.useState(null),[N,p]=d.useState(null),[g,w]=d.useState(e??"F"),[h,b]=d.useState(!1),k=d.useCallback(async()=>{if(s){u(!0),y(null);try{const v=new URLSearchParams({store_id:String(s),period:a}),T=await fetch(`/api/reports/data?${v}`,{headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(!T.ok){const z=await T.json().catch(()=>null);throw new Error(z?.message||z?.error||`Server error (${T.status})`)}const A=await T.json();A.success?(l(A),p(new Date)):y(A.error||"Failed to load report data")}catch(v){y(v instanceof Error?v.message:"Failed to load report")}finally{u(!1)}}},[s,a]),P=async()=>{if(s){m(!0),y(null);try{const v=await fetch("/api/reports/snapshot",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":Ye()},credentials:"include",body:JSON.stringify({store_id:s})});if(!v.ok){const A=await v.json().catch(()=>null);throw new Error(A?.message||A?.error||`Snapshot failed (${v.status})`)}const T=await v.json();T.success?await k():y(T.error||"Snapshot failed")}catch(v){y(v instanceof Error?v.message:"Snapshot failed")}finally{m(!1)}}};d.useEffect(()=>{k()},[k]);const U=async()=>{const v=g==="C"?"F":"C";b(!0);try{(await fetch("/api/settings/temperature-unit",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":Ye()},credentials:"include",body:JSON.stringify({unit:v})})).ok&&(w(v),await k())}catch{}finally{b(!1)}},f=n.find(v=>v.id===s);return n.length===0?t.jsx(J,{children:t.jsxs(Q,{className:"flex flex-col items-center gap-4 py-12",children:[t.jsx(ye,{className:"text-muted-foreground size-12 opacity-40"}),t.jsxs("div",{className:"text-center",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"No Stores Found"}),t.jsx("p",{className:"text-muted-foreground text-sm",children:"Create a store and link devices to start generating reports."})]})]})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[t.jsxs(Rt,{value:String(s??""),onValueChange:v=>r(Number(v)),children:[t.jsx(Pt,{className:"w-55",children:t.jsx(kt,{placeholder:"Select a store"})}),t.jsx(Mt,{children:n.map(v=>t.jsxs(At,{value:String(v.id),children:[v.store_name," (",v.store_number,")"]},v.id))})]}),t.jsx("div",{className:"flex rounded-lg border",children:["daily","weekly","monthly"].map(v=>t.jsx("button",{onClick:()=>c(v),className:`px-4 py-2 text-sm font-medium capitalize transition-colors ${a===v?"bg-primary text-primary-foreground":"hover:bg-muted text-muted-foreground"} ${v==="daily"?"rounded-l-lg":""} ${v==="monthly"?"rounded-r-lg":""}`,children:v},v))}),t.jsxs(ee,{variant:"outline",size:"sm",onClick:U,disabled:h,className:"gap-1.5",children:[h?t.jsx(G,{className:"size-3.5"}):t.jsx(Se,{className:"size-3.5"}),"°",g==="C"?"C → °F":"F → °C"]}),t.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[N&&t.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 text-xs",children:[t.jsx(ss,{className:"size-3"}),N.toLocaleTimeString()]}),t.jsx(ee,{variant:"outline",size:"sm",onClick:P,disabled:x||!s,children:x?t.jsxs(t.Fragment,{children:[t.jsx(G,{className:"size-3.5"}),"Capturing…"]}):t.jsxs(t.Fragment,{children:[t.jsx(Ke,{className:"size-3.5"}),"Capture Snapshot"]})}),t.jsxs(ee,{variant:"outline",size:"sm",onClick:k,disabled:i||!s,children:[i?t.jsx(G,{className:"size-3.5"}):t.jsx(Je,{className:"size-3.5"}),"Refresh"]})]})]}),S&&t.jsx(J,{className:"border-destructive bg-destructive/5",children:t.jsxs(Q,{className:"flex items-center gap-3 py-4",children:[t.jsx(fe,{className:"size-5 text-red-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:S}),t.jsx("p",{className:"text-muted-foreground text-xs",children:"Try capturing a snapshot or check your YoSmart credentials."})]})]})}),i&&!o&&t.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((v,T)=>t.jsx(J,{children:t.jsxs(Q,{className:"pt-6",children:[t.jsx(ke,{className:"mb-2 h-4 w-24"}),t.jsx(ke,{className:"mb-1 h-8 w-20"}),t.jsx(ke,{className:"h-3 w-32"})]})},T))}),o&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl font-semibold",children:[Ge(a)," Report"]}),t.jsxs("p",{className:"text-muted-foreground text-sm",children:[f?.store_name," •"," ",Xe(o.range.from)," – ",Xe(o.range.to)]})]}),t.jsxs(pe,{variant:"outline",className:"text-xs",children:[t.jsx(is,{className:"mr-1 size-3"}),o.overall.total_readings," total readings"]})]}),t.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[t.jsx(ge,{label:"Avg Temperature",value:`${M(o.overall.avg_temp)}°${g}`,subtitle:`${M(o.overall.min_temp)}°${g} – ${M(o.overall.max_temp)}°${g}`,icon:Se,colorClass:Be(o.overall.avg_temp)}),t.jsx(ge,{label:"Avg Humidity",value:`${M(o.overall.avg_humidity)}%`,icon:tt,colorClass:He(o.overall.avg_humidity)}),t.jsx(ge,{label:"Alarms",value:String(o.overall.total_alarms??0),subtitle:o.overall.total_alarms>0?"Events detected":"No alarms",icon:fe,colorClass:o.overall.total_alarms>0?"text-red-600 dark:text-red-400":"text-emerald-600 dark:text-emerald-400"}),t.jsx(ge,{label:"Offline Events",value:String(o.overall.total_offline??0),subtitle:o.overall.total_offline>0?"Connectivity issues":"All online",icon:st,colorClass:o.overall.total_offline>0?"text-amber-600 dark:text-amber-400":"text-emerald-600 dark:text-emerald-400"})]}),t.jsxs(J,{children:[t.jsxs($e,{children:[t.jsxs(ze,{className:"flex items-center gap-2",children:[t.jsx(ye,{className:"size-5"}),"Time Series — ",Ge(a)]}),t.jsxs(Le,{children:["Temperature and humidity aggregated by"," ",a==="daily"?"hour":"day","."]})]}),t.jsx(Q,{children:t.jsx(hn,{data:o.time_series,unit:g})})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"mb-3 text-lg font-semibold",children:"Per-Device Summary"}),t.jsx(gn,{devices:o.device_summary,unit:g})]})]}),!i&&!o&&!S&&t.jsx(J,{children:t.jsxs(Q,{className:"flex flex-col items-center gap-4 py-12",children:[t.jsx(ye,{className:"text-muted-foreground size-12 opacity-40"}),t.jsxs("div",{className:"text-center",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"No Report Data Yet"}),t.jsx("p",{className:"text-muted-foreground text-sm",children:"Select a store and capture a snapshot to start generating reports."})]}),t.jsxs(ee,{onClick:P,disabled:x||!s,children:[x?t.jsx(G,{className:"size-4"}):t.jsx(Ke,{className:"size-4"}),"Capture First Snapshot"]})]})})]})}function Ye(){const s=`; ${document.cookie}`.split("; XSRF-TOKEN=");return s.length===2?decodeURIComponent(s.pop()?.split(";").shift()??""):""}const Sn=[{value:5,label:"Every 5 minutes"},{value:10,label:"Every 10 minutes"},{value:15,label:"Every 15 minutes"},{value:30,label:"Every 30 minutes"},{value:60,label:"Every 1 hour"},{value:120,label:"Every 2 hours"},{value:180,label:"Every 3 hours"},{value:360,label:"Every 6 hours"},{value:720,label:"Every 12 hours"},{value:1440,label:"Every 24 hours"}];function jn(n){if(!n)return"Never";const e=Date.now()-new Date(n).getTime(),s=Math.floor(e/6e4);if(s<1)return"Just now";if(s<60)return`${s}m ago`;const r=Math.floor(s/60);return r<24?`${r}h ago`:`${Math.floor(r/24)}d ago`}function Nn(n){if(!n)return"—";const e=new Date(n).getTime()-Date.now();if(e<=0)return"Now";const s=Math.floor(e/6e4);return s<60?`in ${s}m`:`in ${Math.floor(s/60)}h ${s%60}m`}function bn(){const s=`; ${document.cookie}`.split("; XSRF-TOKEN=");return s.length===2?decodeURIComponent(s.pop()?.split(";").shift()??""):""}async function ve(n,e={}){const s=await fetch(n,{...e,headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":bn(),...e.headers||{}},credentials:"include"});if(!s.ok){const r=await s.json().catch(()=>null);throw new Error(r?.message||r?.error||`Request failed (${s.status})`)}return s.json()}function wn(){const[n,e]=d.useState(null),[s,r]=d.useState(0),[a,c]=d.useState(!0),[o,l]=d.useState(!1),[i,u]=d.useState(!1),[x,m]=d.useState(null),[S,y]=d.useState(null),[N,p]=d.useState("60"),[g,w]=d.useState(!1),h=d.useCallback(async()=>{try{c(!0);const f=await ve("/api/reports/schedules");f.success&&(e(f.schedule),r(f.active_stores),p(String(f.schedule.interval_minutes)))}catch(f){m(f instanceof Error?f.message:"Failed to load schedule")}finally{c(!1)}},[]);d.useEffect(()=>{h()},[h]);const b=f=>{y(f),setTimeout(()=>y(null),3500)},k=async()=>{l(!0),m(null);try{const f=await ve("/api/reports/schedules/toggle",{method:"PATCH"});f.success&&(e(f.schedule),p(String(f.schedule.interval_minutes)),b(f.schedule.is_active?"Schedule activated.":"Schedule paused."))}catch(f){m(f instanceof Error?f.message:"Failed to toggle schedule")}finally{l(!1)}},P=async()=>{if(n){l(!0),m(null);try{const f=await ve("/api/reports/schedules",{method:"POST",body:JSON.stringify({is_active:n.is_active,interval_minutes:Number(N)})});f.success&&(e(f.schedule),w(!1),b("Interval updated."))}catch(f){m(f instanceof Error?f.message:"Failed to save")}finally{l(!1)}}},U=async()=>{u(!0),m(null);try{const f=await ve("/api/reports/schedules/run-now",{method:"POST"});f.success?(await h(),b(f.message||"Snapshot captured.")):(m(f.error||"Run failed."),await h())}catch(f){m(f instanceof Error?f.message:"Run failed")}finally{u(!1)}};return t.jsxs(J,{children:[t.jsx($e,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs(ze,{className:"flex items-center gap-2",children:[t.jsx(ys,{className:"size-5"}),"Automated Snapshot Schedule"]}),t.jsxs(Le,{children:["One global schedule that captures sensor data from"," ",t.jsxs("span",{className:"font-medium text-foreground",children:["all ",s," active store",s!==1?"s":""]})," ","simultaneously at the configured interval."]})]}),t.jsx(ee,{variant:"outline",size:"sm",onClick:h,disabled:a,children:a?t.jsx(G,{className:"size-3.5"}):t.jsx(Je,{className:"size-3.5"})})]})}),t.jsxs(Q,{className:"space-y-4",children:[x&&t.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 dark:border-red-900 dark:bg-red-950/50 dark:text-red-400",children:[t.jsx(fe,{className:"size-4 shrink-0"}),x]}),S&&t.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-700 dark:border-emerald-900 dark:bg-emerald-950/50 dark:text-emerald-400",children:[t.jsx(We,{className:"size-4 shrink-0"}),S]}),a&&!n&&t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(G,{className:"size-6"})}),n&&t.jsxs("div",{className:`rounded-xl border p-5 transition-colors ${n.is_active?"border-emerald-200 bg-emerald-50/40 dark:border-emerald-900 dark:bg-emerald-950/20":"border-muted bg-muted/20"}`,children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(pe,{variant:n.is_active?"default":"secondary",className:"text-sm px-3 py-1",children:n.is_active?"● Active":"○ Paused"}),t.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[t.jsx(ps,{className:"size-3.5"}),s," store",s!==1?"s":""]})]}),t.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[t.jsx(ee,{variant:"outline",size:"sm",onClick:U,disabled:i||o||s===0,title:"Capture a snapshot for all stores right now",children:i?t.jsxs(t.Fragment,{children:[t.jsx(G,{className:"size-3.5"})," Running…"]}):t.jsxs(t.Fragment,{children:[t.jsx(Ns,{className:"size-3.5"})," Run Now"]})}),t.jsx(ee,{variant:n.is_active?"secondary":"default",size:"sm",onClick:k,disabled:o||i,children:o?t.jsx(G,{className:"size-3.5"}):n.is_active?t.jsxs(t.Fragment,{children:[t.jsx(xs,{className:"size-3.5"})," Pause"]}):t.jsxs(t.Fragment,{children:[t.jsx(gs,{className:"size-3.5"})," Activate"]})})]})]}),t.jsxs("div",{className:"mt-4 flex flex-wrap items-end gap-3",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Capture Interval"}),t.jsxs(Rt,{value:N,onValueChange:f=>{p(f),w(f!==String(n.interval_minutes))},children:[t.jsx(Pt,{className:"w-48",children:t.jsx(kt,{})}),t.jsx(Mt,{children:Sn.map(f=>t.jsx(At,{value:String(f.value),children:f.label},f.value))})]})]}),g&&t.jsxs(ee,{size:"sm",onClick:P,disabled:o,children:[o?t.jsx(G,{className:"size-3.5"}):t.jsx(We,{className:"size-3.5"}),"Save"]})]}),t.jsxs("div",{className:"mt-5 grid grid-cols-2 gap-4 border-t pt-4 sm:grid-cols-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Last Run"}),t.jsx("p",{className:"mt-0.5 font-semibold",children:jn(n.last_run_at)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Next Run"}),t.jsx("p",{className:"mt-0.5 font-semibold",children:n.is_active?Nn(n.next_run_at):"—"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Runs"}),t.jsx("p",{className:"mt-0.5 font-semibold",children:n.total_runs})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Consecutive Failures"}),t.jsx("p",{className:`mt-0.5 font-semibold ${n.consecutive_failures>0?"text-red-600 dark:text-red-400":""}`,children:n.consecutive_failures>0?n.consecutive_failures:"—"})]})]}),n.last_error&&t.jsxs("div",{className:"mt-3 flex items-start gap-2 rounded-md bg-red-50 px-3 py-2 text-xs text-red-600 dark:bg-red-950/40 dark:text-red-400",children:[t.jsx(fe,{className:"mt-0.5 size-3.5 shrink-0"}),t.jsx("span",{children:n.last_error})]})]}),t.jsxs("p",{className:"text-center text-xs text-muted-foreground",children:["Requires"," ",t.jsx("code",{className:"rounded bg-muted px-1.5 py-0.5 text-xs",children:"php artisan schedule:run"})," ","running every minute via cron."]})]})]})}const _n=[{title:"Dashboard",href:"/dashboard"},{title:"Reports",href:"/reports"}];function Vn(n){const e=L.c(6),{stores:s}=n;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsx(Ot,{title:"Sensor Reports"}),e[0]=r):r=e[0];let a;e[1]!==s?(a=t.jsx(yn,{stores:s}),e[1]=s,e[2]=a):a=e[2];let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx(wn,{}),e[3]=c):c=e[3];let o;return e[4]!==a?(o=t.jsxs(Jt,{breadcrumbs:_n,children:[r,t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4 md:p-6",children:[a,c]})]}),e[4]=a,e[5]=o):o=e[5],o}export{Vn as default};
